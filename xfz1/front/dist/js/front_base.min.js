function FrontBase(){}function Auth(){this.signinBtn=$("#signin"),this.signupBtn=$("#signup"),this.closeBtn=$(".close_btn"),this.maskBox=$(".mask_box"),this.rightSpan=$(".right_span"),this.rightSpan1=$(".right_span1"),this.authDiv=$(".auth-2_div")}FrontBase.prototype.hover=function(){var n=$(".author_box"),t=$(".user_more_box");n.hover(function(){t.show()},function(){t.hide()})},FrontBase.prototype.navClick=function(){var n=window.location.href,t=window.location.protocol+"//"+window.location.host,a=n.replace(t,"");$(".list_box li").each(function(n,t){var i=$(t);i.children("a").attr("href")===a&&i.addClass("active").siblings().removeClass("active")})},FrontBase.prototype.run=function(){this.hover(),this.navClick()},$(function(){(new FrontBase).run()}),Auth.prototype.click=function(){var n=this;n.signinBtn.click(function(){n.maskBox.show(),n.authDiv.css({left:0})}),n.closeBtn.click(function(){n.maskBox.hide()}),n.rightSpan.click(function(){n.authDiv.animate({left:-400})}),n.rightSpan1.click(function(){n.authDiv.animate({left:0})}),n.signupBtn.click(function(){n.maskBox.show(),n.authDiv.css({left:-400})})},Auth.prototype.smsCaptchaClick=function(){var a=this,e=$(".send_captcha"),t=$(".signup_div");e.click(function(){var n=t.find("input[name='telephone']").val();n||window.messageBox.showInfo("请输入手机号码"),xfzajax.get({url:"/account/sms_captcha/",data:{telephone:n},success:function(n){if(200===n.code){window.messageBox.showSuccess("短信验证码发送成功"),e.unbind("click"),e.addClass("disabled");var t=10,i=setInterval(function(){e.val(t+"s"),--t<0&&(clearInterval(i),e.removeClass("disabled"),e.val("发送验证码"),a.smsCaptchaClick())},1e3)}}})})},Auth.prototype.captchaClick=function(){var n=$(".captcha");n.click(function(){n.attr("src","/account/captcha/?random="+Math.random())})},Auth.prototype.signinEvent=function(){var e=this,n=$(".signin_div"),a=n.find("input[name='telephone']"),o=n.find("input[name='password']"),s=n.find("input[name='remember']");n.find(".submit").click(function(){var n=a.val(),t=o.val(),i=s.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:n,password:t,remember:i?1:0},success:function(n){if(console.log(n),200===n.code){e.maskBox.hide(),window.location.reload();var t=n.message;if("string"==typeof t||t.constructor==String)window.messageBox.show(t);else for(var i in t){var a=t[i][0];window.messageBox.show(a)}}},fail:function(n){console.log(n)}})})},Auth.prototype.signupEvent=function(){var h=$(".signup_div");h.find("input[class='submit1']").click(function(){var n=h.find("input[name='telephone']"),t=h.find("input[name='username']"),i=h.find("input[name='password']"),a=h.find("input[name='password1']"),e=h.find("input[name='img_captcha']"),o=h.find("input[name='sms_captcha']"),s=n.val(),c=t.val(),r=i.val(),u=a.val(),l=e.val(),p=o.val();xfzajax.post({url:"/account/register/",data:{telephone:s,username:c,password:r,password1:u,img_captcha:l,sms_captcha:p},success:function(){window.messageBox.showSuccess("注册成功"),window.location.reload()}})})},Auth.prototype.run=function(){var n=this;n.click(),n.signinEvent(),n.signupEvent(),n.captchaClick(),n.smsCaptchaClick()},$(function(){(new Auth).run()}),$(function(){window.template&&(template.defaults.imports.timeSince=function(n){var t=new Date(n),i=t.getTime(),a=((new Date).getTime()-i)/1e3;if(a<60)return"刚刚";if(60<=a&&a<3600)return(r=parseInt(a/60))+"分钟前";if(3600<=a&&a<86400)return(c=parseInt(a/60/60))+"小时前";if(86400<=a&&a<2592e3)return(s=parseInt(a/60/60/24))+"天前";var e=t.getFullYear(),o=t.getMonth(),s=t.getDay(),c=t.getHours(),r=t.getMinutes();return e+"/"+o+"/"+s+" "+c+":"+r})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInRoaXMiLCJzaWduaW5CdG4iLCIkIiwic2lnbnVwQnRuIiwiY2xvc2VCdG4iLCJtYXNrQm94IiwicmlnaHRTcGFuIiwicmlnaHRTcGFuMSIsImF1dGhEaXYiLCJwcm90b3R5cGUiLCJob3ZlciIsImF1dGhvckJveCIsIm1vcmVCb3giLCJzaG93IiwiaGlkZSIsIm5hdkNsaWNrIiwidXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiZG9tYWluIiwicHJvdG9jb2wiLCJob3N0IiwicGF0aCIsInJlcGxhY2UiLCJlYWNoIiwiaW5kZXgiLCJlbGVtZW50IiwibGkiLCJjaGlsZHJlbiIsImF0dHIiLCJhZGRDbGFzcyIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJydW4iLCJjbGljayIsInNlbGYiLCJjc3MiLCJsZWZ0IiwiYW5pbWF0ZSIsInNtc0NhcHRjaGFDbGljayIsInNtc0NhcHRjaGEiLCJzaWdudXBEaXYiLCJ0ZWxlcGhvbmUiLCJmaW5kIiwidmFsIiwibWVzc2FnZUJveCIsInNob3dJbmZvIiwieGZ6YWpheCIsImdldCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0Iiwic2hvd1N1Y2Nlc3MiLCJ1bmJpbmQiLCJjb3VudCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiY2FwdGNoYUNsaWNrIiwiY2FwdGNoYSIsIk1hdGgiLCJyYW5kb20iLCJzaWduaW5FdmVudCIsInNpZ25pbkRpdiIsInNpZ25pblRlbGVwaG9uZSIsInNpZ25pblBhc3N3b3JkIiwic2lnbmluUmVtZW1iZXIiLCJwYXNzd29yZCIsInJlbWVtYmVyIiwicHJvcCIsInBvc3QiLCJjb25zb2xlIiwibG9nIiwicmVsb2FkIiwibWVzc2FnZSIsImNvbnN0cnVjdG9yIiwiU3RyaW5nIiwia2V5IiwiZmlyc3QiLCJmYWlsIiwiZXJyb3IiLCJzaWdudXBFdmVudCIsInNpZ251cFRlbGVwaG9uZSIsInNpZ251cFVzZXJuYW1lIiwic2lnbnVwUGFzc3dvcmQiLCJzaWdudXBQYXNzd29yZDEiLCJzaWdudXBJbWdDYXB0Y2hhIiwic2lnbnVwU21zQ2FwdGNoYSIsInVzZXJuYW1lIiwicGFzc3dvcmQxIiwiaW1nQ2FwdGNoYSIsImltZ19jYXB0Y2hhIiwic21zX2NhcHRjaGEiLCJ0ZW1wbGF0ZSIsImRlZmF1bHRzIiwiaW1wb3J0cyIsInRpbWVTaW5jZSIsImRhdGVWYWx1ZSIsImRhdGUiLCJEYXRlIiwiZGF0ZXRzIiwiZ2V0VGltZSIsInRpbWVzdGFtcCIsIm1pbnV0ZSIsInBhcnNlSW50IiwiaG91ciIsImRheSIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiZ2V0TW9udGgiLCJnZXREYXkiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiXSwibWFwcGluZ3MiOiJBQUNBLFNBQVNBLGFBK0NULFNBQVNDLE9BQ0xDLEtBQUtDLFVBQVlDLEVBQUUsV0FDbkJGLEtBQUtHLFVBQVlELEVBQUUsV0FDbkJGLEtBQUtJLFNBQVdGLEVBQUUsY0FDbEJGLEtBQUtLLFFBQVVILEVBQUUsYUFDakJGLEtBQUtNLFVBQVlKLEVBQUUsZUFDbkJGLEtBQUtPLFdBQWFMLEVBQUUsZ0JBQ3BCRixLQUFLUSxRQUFVTixFQUFFLGVBbERyQkosVUFBVVcsVUFBVUMsTUFBUSxXQUN4QixJQUFJQyxFQUFZVCxFQUFFLGVBQ2RVLEVBQVVWLEVBQUUsa0JBQ2hCUyxFQUFVRCxNQUFNLFdBQ1pFLEVBQVFDLFFBQ1QsV0FDQ0QsRUFBUUUsVUFJaEJoQixVQUFVVyxVQUFVTSxTQUFXLFdBQzNCLElBQUlDLEVBQU1DLE9BQU9DLFNBQVNDLEtBR3RCQyxFQUZXSCxPQUFPQyxTQUFTRyxTQUVQLEtBRGJKLE9BQU9DLFNBQVNJLEtBRXZCQyxFQUFPUCxFQUFJUSxRQUFRSixFQUFRLElBQ3JCbEIsRUFBRSxnQkFDUnVCLEtBQUssU0FBVUMsRUFBT0MsR0FDdEIsSUFBSUMsRUFBSzFCLEVBQUV5QixHQUNIQyxFQUFHQyxTQUFT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Q2QsTUFDYixHQUFpQixNQUFiQSxHQUF3QkEsRUFBWSxNQUUzQyxPQURBRyxFQUFPRCxTQUFTRixFQUFZLEdBQUssS0FDbkIsTUFDWCxHQUFpQixPQUFiQSxHQUE2QkEsRUFBWSxPQUVoRCxPQURBSSxFQUFNRixTQUFTRixFQUFZLEdBQUssR0FBSyxLQUN4QixLQUViLElBQUlLLEVBQU9ULEVBQUtVLGNBQ1pDLEVBQVFYLEVBQUtZLFdBQ2JKLEVBQU1SLEVBQUthLFNBQ1hOLEVBQU9QLEVBQUtjLFdBQ1pULEVBQVNMLEVBQUtlLGFBQ2xCLE9BQU9OLEVBQU8sSUFBTUUsRUFBUSxJQUFNSCxFQUFNLElBQU1ELEVBQU8sSUFBTUYiLCJmaWxlIjoiZnJvbnRfYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZnVuY3Rpb24gRnJvbnRCYXNlKCkge1xyXG5cclxufVxyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5ob3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhdXRob3JCb3ggPSAkKFwiLmF1dGhvcl9ib3hcIik7XHJcbiAgICB2YXIgbW9yZUJveCA9ICQoXCIudXNlcl9tb3JlX2JveFwiKTtcclxuICAgIGF1dGhvckJveC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbW9yZUJveC5zaG93KCk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbW9yZUJveC5oaWRlKCk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5uYXZDbGljayA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICB2YXIgcHJvdG9jb2wgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7XHJcbiAgICB2YXIgaG9zdCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xyXG4gICAgdmFyIGRvbWFpbiA9IHByb3RvY29sICsgJy8vJyArIGhvc3RcclxuICAgIHZhciBwYXRoID0gdXJsLnJlcGxhY2UoZG9tYWluLCAnJyk7XHJcbiAgICB2YXIgbGlzID0gJCgnLmxpc3RfYm94IGxpJyk7XHJcbiAgICBsaXMuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgbGkgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgIHZhciBhID0gbGkuY2hpbGRyZW4oJ2EnKTtcclxuICAgICAgICB2YXIgaHJlZiA9IGEuYXR0cignaHJlZicpO1xyXG4gICAgICAgIGlmIChocmVmID09PSBwYXRoKXtcclxuICAgICAgICAgICAgbGkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn07XHJcblxyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmhvdmVyKCk7XHJcbiAgICBzZWxmLm5hdkNsaWNrKCk7XHJcbn07XHJcblxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZnJvbnRfYmFzZSA9IG5ldyBGcm9udEJhc2UoKTtcclxuICAgIGZyb250X2Jhc2UucnVuKClcclxuXHJcbn0pO1xyXG5cclxuXHJcbmZ1bmN0aW9uIEF1dGgoKSB7XHJcbiAgICB0aGlzLnNpZ25pbkJ0biA9ICQoXCIjc2lnbmluXCIpO1xyXG4gICAgdGhpcy5zaWdudXBCdG4gPSAkKFwiI3NpZ251cFwiKTtcclxuICAgIHRoaXMuY2xvc2VCdG4gPSAkKFwiLmNsb3NlX2J0blwiKTtcclxuICAgIHRoaXMubWFza0JveCA9ICQoXCIubWFza19ib3hcIik7XHJcbiAgICB0aGlzLnJpZ2h0U3BhbiA9ICQoXCIucmlnaHRfc3BhblwiKTtcclxuICAgIHRoaXMucmlnaHRTcGFuMSA9ICQoXCIucmlnaHRfc3BhbjFcIik7XHJcbiAgICB0aGlzLmF1dGhEaXYgPSAkKFwiLmF1dGgtMl9kaXZcIik7XHJcbn1cclxuXHJcbkF1dGgucHJvdG90eXBlLmNsaWNrID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuc2lnbmluQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLm1hc2tCb3guc2hvdygpO1xyXG4gICAgICAgIHNlbGYuYXV0aERpdi5jc3Moe1wibGVmdFwiOjB9KVxyXG4gICAgfSk7XHJcbiAgICBzZWxmLmNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLm1hc2tCb3guaGlkZSgpO1xyXG4gICAgfSk7XHJcbiAgICBzZWxmLnJpZ2h0U3Bhbi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5hdXRoRGl2LmFuaW1hdGUoe1wibGVmdFwiOi00MDB9KTtcclxuICAgIH0pO1xyXG4gICAgc2VsZi5yaWdodFNwYW4xLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmF1dGhEaXYuYW5pbWF0ZSh7XCJsZWZ0XCI6MH0pXHJcbiAgICB9KTtcclxuXHJcbiAgICBzZWxmLnNpZ251cEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5tYXNrQm94LnNob3coKTtcclxuICAgICAgICBzZWxmLmF1dGhEaXYuY3NzKHtcImxlZnRcIjotNDAwfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5zbXNDYXB0Y2hhQ2xpY2sgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNtc0NhcHRjaGEgPSAkKCcuc2VuZF9jYXB0Y2hhJyk7XHJcbiAgICB2YXIgc2lnbnVwRGl2ID0gJCgnLnNpZ251cF9kaXYnKTtcclxuICAgIHNtc0NhcHRjaGEuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ251cERpdi5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIGlmICghdGVsZXBob25lKXtcclxuICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0luZm8oJ+ivt+i+k+WFpeaJi+acuuWPt+eggScpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9zbXNfY2FwdGNoYS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+efreS/oemqjOivgeeggeWPkemAgeaIkOWKnycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNtc0NhcHRjaGEudW5iaW5kKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNtc0NhcHRjaGEuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbXNDYXB0Y2hhLnZhbChjb3VudCArICdzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50IC09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA8IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbXNDYXB0Y2hhLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21zQ2FwdGNoYS52YWwoJ+WPkemAgemqjOivgeeggScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhQ2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sMTAwMClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUuY2FwdGNoYUNsaWNrID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjYXB0Y2hhID0gJCgnLmNhcHRjaGEnKTtcclxuICAgIGNhcHRjaGEuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNhcHRjaGEuYXR0cignc3JjJywgJy9hY2NvdW50L2NhcHRjaGEvJysgJz9yYW5kb209JyArIE1hdGgucmFuZG9tKCkpXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUuc2lnbmluRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNpZ25pbkRpdiA9ICQoXCIuc2lnbmluX2RpdlwiKTtcclxuICAgIHZhciBzaWduaW5UZWxlcGhvbmUgPSBzaWduaW5EaXYuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgdmFyIHNpZ25pblBhc3N3b3JkID0gc2lnbmluRGl2LmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZCddXCIpO1xyXG4gICAgdmFyIHNpZ25pblJlbWVtYmVyID0gc2lnbmluRGl2LmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xyXG4gICAgdmFyIHNpZ25pblN1Ym1pdCA9IHNpZ25pbkRpdi5maW5kKFwiLnN1Ym1pdFwiKTtcclxuXHJcbiAgICBzaWduaW5TdWJtaXQuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSBzaWduaW5UZWxlcGhvbmUudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkID0gc2lnbmluUGFzc3dvcmQudmFsKCk7XHJcbiAgICAgICAgdmFyIHJlbWVtYmVyID0gc2lnbmluUmVtZW1iZXIucHJvcChcImNoZWNrZWRcIik7XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvbG9naW4vJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICAncmVtZW1iZXInOiByZW1lbWJlcj8xOjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubWFza0JveC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gcmVzdWx0WydtZXNzYWdlJ107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09ICdzdHJpbmcnIHx8IG1lc3NhZ2UuY29uc3RydWN0b3IgPT0gU3RyaW5nKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhtZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG1lc3NhZ2Upe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gbWVzc2FnZVtrZXldWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvdyhmaXJzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge31cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZhaWwnOiBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5zaWdudXBFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc2lnbnVwRGl2ID0gJCgnLnNpZ251cF9kaXYnKTtcclxuICAgIHZhciBzdWJtaXQxID0gc2lnbnVwRGl2LmZpbmQoXCJpbnB1dFtjbGFzcz0nc3VibWl0MSddXCIpO1xyXG5cclxuICAgIHN1Ym1pdDEuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzaWdudXBUZWxlcGhvbmUgPSBzaWdudXBEaXYuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgICAgIHZhciBzaWdudXBVc2VybmFtZSA9IHNpZ251cERpdi5maW5kKFwiaW5wdXRbbmFtZT0ndXNlcm5hbWUnXVwiKTtcclxuICAgICAgICB2YXIgc2lnbnVwUGFzc3dvcmQgPSBzaWdudXBEaXYuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkJ11cIik7XHJcbiAgICAgICAgdmFyIHNpZ251cFBhc3N3b3JkMSA9IHNpZ251cERpdi5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQxJ11cIik7XHJcbiAgICAgICAgdmFyIHNpZ251cEltZ0NhcHRjaGEgPSBzaWdudXBEaXYuZmluZChcImlucHV0W25hbWU9J2ltZ19jYXB0Y2hhJ11cIik7XHJcbiAgICAgICAgdmFyIHNpZ251cFNtc0NhcHRjaGEgPSBzaWdudXBEaXYuZmluZChcImlucHV0W25hbWU9J3Ntc19jYXB0Y2hhJ11cIik7XHJcblxyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSBzaWdudXBUZWxlcGhvbmUudmFsKCk7XHJcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gc2lnbnVwVXNlcm5hbWUudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkID0gc2lnbnVwUGFzc3dvcmQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMSA9IHNpZ251cFBhc3N3b3JkMS52YWwoKTtcclxuICAgICAgICB2YXIgaW1nQ2FwdGNoYSA9IHNpZ251cEltZ0NhcHRjaGEudmFsKCk7XHJcbiAgICAgICAgdmFyIHNtc0NhcHRjaGEgPSBzaWdudXBTbXNDYXB0Y2hhLnZhbCgpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvcmVnaXN0ZXIvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzogdXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZDEnOiBwYXNzd29yZDEsXHJcbiAgICAgICAgICAgICAgICAnaW1nX2NhcHRjaGEnOiBpbWdDYXB0Y2hhLFxyXG4gICAgICAgICAgICAgICAgJ3Ntc19jYXB0Y2hhJzogc21zQ2FwdGNoYVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKCfms6jlhozmiJDlip8nKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5jbGljaygpO1xyXG4gICAgc2VsZi5zaWduaW5FdmVudCgpO1xyXG4gICAgc2VsZi5zaWdudXBFdmVudCgpO1xyXG4gICAgc2VsZi5jYXB0Y2hhQ2xpY2soKTtcclxuICAgIHNlbGYuc21zQ2FwdGNoYUNsaWNrKCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhdXRoID0gbmV3IEF1dGgoKTtcclxuICAgIGF1dGgucnVuKCk7XHJcbn0pO1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAod2luZG93LnRlbXBsYXRlKSB7XHJcbiAgICAgICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZVZhbHVlKTtcclxuICAgICAgICAgICAgdmFyIGRhdGV0cyA9IGRhdGUuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICB2YXIgbm93dHMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gKG5vd3RzIC0gZGF0ZXRzKSAvIDEwMDA7XHJcbiAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICfliJrliJonO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA+PSA2MCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwKSB7XHJcbiAgICAgICAgICAgICAgICBtaW51dGUgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWludXRlICsgJ+WIhumSn+WJjSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZXN0YW1wID49IDYwICogNjAgJiYgdGltZXN0YW1wIDwgNjAgKiA2MCAqIDI0KSB7XHJcbiAgICAgICAgICAgICAgICBob3VyID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaG91ciArICflsI/ml7bliY0nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA+PSA2MCAqIDYwICogMjQgJiYgdGltZXN0YW1wIDwgNjAgKiA2MCAqIDI0ICogMzApIHtcclxuICAgICAgICAgICAgICAgIGRheSA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjAgLyAyNCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF5ICsgJ+WkqeWJjSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geWVhciArICcvJyArIG1vbnRoICsgJy8nICsgZGF5ICsgJyAnICsgaG91ciArICc6JyArIG1pbnV0ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTsiXX0=
