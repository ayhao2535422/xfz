function Banners(){}Banners.prototype.loadData=function(){var s=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a],r=template("banner_item",{banner:t}),i=$(".banner_list_group");i.append(r);var o=i.find(".banner_item:last");s.addImageSelectEvent(o),s.removeBannerEvent(o),s.saveBannerEvent(o)}}})},Banners.prototype.listenAddBannerEvent=function(){var t=this;$("#add_banner_btn").click(function(){var n=$(".banner_list_group");if(6<=n.children().length)window.messageBox.showInfo("最多只能添加6张轮播图");else{var e=template("banner_item");n.prepend(e);var a=n.find(".banner_item:first");t.addImageSelectEvent(a),t.removeBannerEvent(a),t.saveBannerEvent(a)}})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image_input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.removeBannerEvent=function(e){e.find(".close_btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"确定要删除吗？",confirmCallback:function(){xfzajax.post({url:"/cms/del_banner/",data:{banner_id:n},success:function(n){200===n.code&&(window.location.reload(),window.messageBox.showSuccess("删除成功"))}})}}):e.remove()})},Banners.prototype.saveBannerEvent=function(t){var n=$(".save_btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),s=t.find(".priority"),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),a=i.val(),e=o.val();xfzajax.post({url:d,data:{image_url:n,priority:a,link_to:e,pk:c},success:function(n){if(200===n.code){if(c)window.messageBox.showSuccess("修改成功");else{var e=n.data.banner_id;t.attr("data-banner-id",e),window.messageBox.showSuccess("保存成功")}s.text("优先级"+a)}}})})},Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsImxvYWREYXRhIiwic2VsZiIsInRoaXMiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsImJhbm5lcnMiLCJpIiwibGVuZ3RoIiwiYmFubmVyIiwidHBsIiwidGVtcGxhdGUiLCJiYW5uZXJMaXN0R3JvdXAiLCIkIiwiYXBwZW5kIiwiYmFubmVySXRlbSIsImZpbmQiLCJhZGRJbWFnZVNlbGVjdEV2ZW50IiwicmVtb3ZlQmFubmVyRXZlbnQiLCJzYXZlQmFubmVyRXZlbnQiLCJsaXN0ZW5BZGRCYW5uZXJFdmVudCIsImNsaWNrIiwiY2hpbGRyZW4iLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0luZm8iLCJwcmVwZW5kIiwiaW1hZ2UiLCJpbWFnZUlucHV0IiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInBvc3QiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsImF0dHIiLCJiYW5uZXJJZCIsInhmemFsZXJ0IiwiYWxlcnRDb25maXJtIiwidGV4dCIsImNvbmZpcm1DYWxsYmFjayIsImJhbm5lcl9pZCIsImxvY2F0aW9uIiwicmVsb2FkIiwic2hvd1N1Y2Nlc3MiLCJyZW1vdmUiLCJzYXZlQnRuIiwiaW1hZ2VUYWciLCJwcmlvcml0eVRhZyIsImxpbmtfdG9UYWciLCJwcmlvcml0eVNwYW4iLCJpbWFnZV91cmwiLCJwcmlvcml0eSIsInZhbCIsImxpbmtfdG8iLCJwayIsImJhbm5lclBrIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxXQUlUQSxRQUFRQyxVQUFVQyxTQUFXLFdBQ3pCLElBQUlDLEVBQU9DLEtBQ1hDLFFBQVFDLElBQUksQ0FDUkMsSUFBTyxvQkFDUEMsUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUViLElBREEsSUFBSUMsRUFBVUQsRUFBYSxL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bENNLEVBQWFYLEtBQUssTUFBUWEsVUFPOUMzRCxRQUFRQyxVQUFVK0QsSUFBTSxXQUNUNUQsS0FDTm9CLHVCQURNcEIsS0FFTkYsWUFHVGUsRUFBRSxZQUNnQixJQUFJakIsU0FDVmdFIiwiZmlsZSI6ImJhbm5lcnMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gQmFubmVycygpIHtcclxuXHJcbn1cclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLmxvYWREYXRhID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAndXJsJzogJy9jbXMvYmFubmVyX2xpc3QvJyxcclxuICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhbm5lcnMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmFubmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXIgPSBiYW5uZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgnYmFubmVyX2l0ZW0nLCB7J2Jhbm5lcic6IGJhbm5lcn0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKCcuYmFubmVyX2xpc3RfZ3JvdXAnKTtcclxuICAgICAgICAgICAgICAgICAgICBiYW5uZXJMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhbm5lckl0ZW0gPSBiYW5uZXJMaXN0R3JvdXAuZmluZCgnLmJhbm5lcl9pdGVtOmxhc3QnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZEltYWdlU2VsZWN0RXZlbnQoYmFubmVySXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZW1vdmVCYW5uZXJFdmVudChiYW5uZXJJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNhdmVCYW5uZXJFdmVudChiYW5uZXJJdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5saXN0ZW5BZGRCYW5uZXJFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYWRkQnRuID0gJCgnI2FkZF9iYW5uZXJfYnRuJyk7XHJcblxyXG5cclxuICAgIGFkZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoJy5iYW5uZXJfbGlzdF9ncm91cCcpO1xyXG4gICAgICAgIHZhciBiYW5uZXJMZW5ndGggPSBiYW5uZXJMaXN0R3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKGJhbm5lckxlbmd0aCA+PSA2KXtcclxuICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0luZm8oJ+acgOWkmuWPquiDvea3u+WKoDblvKDova7mkq3lm74nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKCdiYW5uZXJfaXRlbScpO1xyXG4gICAgICAgICAgICBiYW5uZXJMaXN0R3JvdXAucHJlcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICB2YXIgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKCcuYmFubmVyX2l0ZW06Zmlyc3QnKTtcclxuICAgICAgICAgICAgc2VsZi5hZGRJbWFnZVNlbGVjdEV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgICAgICAgICBzZWxmLnJlbW92ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgICAgICAgICBzZWxmLnNhdmVCYW5uZXJFdmVudChiYW5uZXJJdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkSW1hZ2VTZWxlY3RFdmVudCA9IGZ1bmN0aW9uKGJhbm5lckl0ZW0pe1xyXG4gICAgdmFyIGltYWdlID0gYmFubmVySXRlbS5maW5kKCcudGh1bWJuYWlsJyk7XHJcbiAgICB2YXIgaW1hZ2VJbnB1dCA9IGJhbm5lckl0ZW0uZmluZCgnLmltYWdlX2lucHV0Jyk7XHJcbiAgICBpbWFnZS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW1hZ2VJbnB1dC5jbGljaygpO1xyXG4gICAgfSk7XHJcbiAgICBpbWFnZUlucHV0LmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2UuYXR0cignc3JjJywgdXJsKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLnJlbW92ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24oYmFubmVySXRlbSl7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSBiYW5uZXJJdGVtLmZpbmQoJy5jbG9zZV9idG4nKTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYmFubmVySWQgPSBiYW5uZXJJdGVtLmF0dHIoJ2RhdGEtYmFubmVyLWlkJyk7XHJcbiAgICAgICAgaWYgKGJhbm5lcklkKXtcclxuICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRDb25maXJtKHtcclxuICAgICAgICAgICAgICAgICd0ZXh0JzogJ+ehruWumuimgeWIoOmZpOWQl++8nycsXHJcbiAgICAgICAgICAgICAgICAnY29uZmlybUNhbGxiYWNrJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd1cmwnOiAnL2Ntcy9kZWxfYmFubmVyLycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Jhbm5lcl9pZCc6IGJhbm5lcklkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuc2F2ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24oYmFubmVySXRlbSl7XHJcbiAgICB2YXIgc2F2ZUJ0biA9ICQoJy5zYXZlX2J0bicpO1xyXG4gICAgdmFyIGltYWdlVGFnID0gYmFubmVySXRlbS5maW5kKCcudGh1bWJuYWlsJyk7XHJcbiAgICB2YXIgcHJpb3JpdHlUYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdwcmlvcml0eSddXCIpO1xyXG4gICAgdmFyIGxpbmtfdG9UYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdsaW5rX3RvJ11cIik7XHJcbiAgICB2YXIgcHJpb3JpdHlTcGFuID0gYmFubmVySXRlbS5maW5kKCcucHJpb3JpdHknKTtcclxuICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cignZGF0YS1iYW5uZXItaWQnKTtcclxuICAgIHZhciB1cmwgPSAnJztcclxuICAgIGlmIChiYW5uZXJJZCl7XHJcbiAgICAgICAgdXJsID0gJy9jbXMvZWRpdF9iYW5uZXIvJztcclxuICAgIH1lbHNlIHtcclxuICAgICAgICB1cmwgPSAnL2Ntcy9hZGRfYmFubmVyLyc7XHJcbiAgICB9XHJcbiAgICBzYXZlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW1hZ2VfdXJsID0gaW1hZ2VUYWcuYXR0cignc3JjJyk7XHJcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdHlUYWcudmFsKCk7XHJcbiAgICAgICAgdmFyIGxpbmtfdG8gPSBsaW5rX3RvVGFnLnZhbCgpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ2ltYWdlX3VybCc6IGltYWdlX3VybCxcclxuICAgICAgICAgICAgICAgICdwcmlvcml0eSc6IHByaW9yaXR5LFxyXG4gICAgICAgICAgICAgICAgJ2xpbmtfdG8nOiBsaW5rX3RvLFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogYmFubmVySWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhbm5lcklkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhbm5lclBrID0gcmVzdWx0WydkYXRhJ11bJ2Jhbm5lcl9pZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJdGVtLmF0dHIoJ2RhdGEtYmFubmVyLWlkJywgYmFubmVyUGspO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn5L+d5a2Y5oiQ5YqfJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5U3Bhbi50ZXh0KCfkvJjlhYjnuqcnICsgcHJpb3JpdHkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkFkZEJhbm5lckV2ZW50KCk7XHJcbiAgICBzZWxmLmxvYWREYXRhKCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXJzID0gbmV3IEJhbm5lcnMoKTtcclxuICAgIGJhbm5lcnMucnVuKCk7XHJcbn0pOyJdfQ==
