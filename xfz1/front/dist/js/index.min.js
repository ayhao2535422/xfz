function Banner(){this.bannerWidth=798,this.bannerGroup=$(".banner_group"),this.index=1,this.leftArrow=$(".left_arrow"),this.rightArrow=$(".right_arrow"),this.bannerUl=$(".banner_ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page_control")}function Index(){this.page=2,this.category_id=0}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(e),n.bannerUl.prepend(t),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n+1,t.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load_more_btn");r.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var e=n.data;if(0<e.length){var t=template("news_item",{newses:e});$(".inner_news_box").append(t),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var s=this;$(".tab_box").children().click(function(){var r=$(this),a=r.attr("data-category"),o=$("#load_more_btn");xfzajax.get({url:"/news/list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var e=n.data,t=template("news_item",{newses:e}),i=$(".inner_news_box");i.empty(),i.append(t),s.page=2,s.category_id=a,r.addClass("active").siblings().removeClass("active"),o.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){var n=new Banner,e=new Index;n.run(),e.run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJwYWdlIiwiY2F0ZWdvcnlfaWQiLCJwcm90b3R5cGUiLCJpbml0QmFubmVyIiwic2VsZiIsImZpcnN0QmFubmVyIiwiZXEiLCJjbG9uZSIsImxhc3RCYW5uZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwiY3NzIiwid2lkdGgiLCJsZWZ0IiwiaW5pdFBhZ2VDb250cm9sIiwiaSIsImNpcmNsZSIsImFkZENsYXNzIiwidG9nZ2xlQXJyb3ciLCJpc1Nob3ciLCJzaG93IiwiaGlkZSIsImFuaW1hdGUiLCJzdG9wIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImxvb3AiLCJ0aW1lciIsInNldEludGVydmFsIiwibGlzdGVuQXJyb3dDbGljayIsImNsaWNrIiwibGlzdGVuQmFubmVySG92ZXIiLCJob3ZlciIsImNsZWFySW50ZXJ2YWwiLCJsaXN0ZW5QYWdlQ29udHJvbCIsImVhY2giLCJvYmoiLCJydW4iLCJsaXN0ZW5Mb2FkTW9yZUV2ZW50IiwibG9hZEJ0biIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQiLCJsaSIsImF0dHIiLCJ1bCIsImVtcHR5IiwiYmFubmVyIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxTQUNMQyxLQUFLQyxZQUFjLElBQ25CRCxLQUFLRSxZQUFjQyxFQUFFLGlCQUNyQkgsS0FBS0ksTUFBUSxFQUNiSixLQUFLSyxVQUFZRixFQUFFLGVBQ25CSCxLQUFLTSxXQUFhSCxFQUFFLGdC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QWEsS0FDdEJFLEVBQU1DLFNBQVMsWUFBYSxDQUFDRixPQUFVQSxJQUN2Q00sRUFBS2hFLEVBQUUsbUJBQ1hnRSxFQUFHQyxRQUNIRCxFQUFHNUMsT0FBT3VDLEdBQ1Y1QyxFQUFLSixLQUFPLEVBQ1pJLEVBQUtILFlBQWNBLEVBQ25Ca0QsRUFBR2xDLFNBQVMsVUFBVU8sV0FBV0MsWUFBWSxVQUM3Q2MsRUFBUW5CLGNBTzVCckIsTUFBTUcsVUFBVW1DLElBQU0sV0FDUG5ELEtBQ05vRCxzQkFETXBELEtBRU5nRSw2QkFHVDdELEVBQUUsV0FDRSxJQUFJa0UsRUFBUyxJQUFJdEUsT0FDYkssRUFBUSxJQUFJUyxNQUNoQndELEVBQU9sQixNQUNQL0MsRUFBTStDIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJhbm5lcigpIHtcclxuICAgIHRoaXMuYmFubmVyV2lkdGggPSA3OTg7XHJcbiAgICB0aGlzLmJhbm5lckdyb3VwID0gJChcIi5iYW5uZXJfZ3JvdXBcIik7XHJcbiAgICB0aGlzLmluZGV4ID0gMTtcclxuICAgIHRoaXMubGVmdEFycm93ID0gJChcIi5sZWZ0X2Fycm93XCIpO1xyXG4gICAgdGhpcy5yaWdodEFycm93ID0gJChcIi5yaWdodF9hcnJvd1wiKTtcclxuICAgIHRoaXMuYmFubmVyVWwgPSAkKFwiLmJhbm5lcl91bFwiKTtcclxuICAgIHRoaXMubGlMaXN0ID0gdGhpcy5iYW5uZXJVbC5jaGlsZHJlbihcImxpXCIpO1xyXG4gICAgdGhpcy5iYW5uZXJDb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aDtcclxuICAgIHRoaXMucGFnZUNvbnRyb2wgPSAkKFwiLnBhZ2VfY29udHJvbFwiKTtcclxufVxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0QmFubmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGZpcnN0QmFubmVyID0gc2VsZi5saUxpc3QuZXEoMCkuY2xvbmUoKTtcclxuICAgIHZhciBsYXN0QmFubmVyID0gc2VsZi5saUxpc3QuZXEoc2VsZi5iYW5uZXJDb3VudC0xKS5jbG9uZSgpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5hcHBlbmQoZmlyc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wid2lkdGhcIjpzZWxmLmJhbm5lcldpZHRoKihzZWxmLmJhbm5lckNvdW50KzIpLCdsZWZ0Jzotc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0UGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBmb3IodmFyIGk9MDsgaTxzZWxmLmJhbm5lckNvdW50OyBpKyspe1xyXG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xyXG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XHJcbiAgICAgICAgaWYoaSA9PT0gMCl7XHJcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyQ291bnQqMTIrOCoyKzE2KihzZWxmLmJhbm5lckNvdW50LTEpfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24gKGlzU2hvdykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgaWYoaXNTaG93KXtcclxuICAgICAgICBzZWxmLmxlZnRBcnJvdy5zaG93KCk7XHJcbiAgICAgICAgc2VsZi5yaWdodEFycm93LnNob3coKTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKTtcclxuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuaGlkZSgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5zdG9wKCkuYW5pbWF0ZSh7XCJsZWZ0XCI6LTc5OCpzZWxmLmluZGV4fSw1MDApO1xyXG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcclxuICAgIGlmKGluZGV4ID09PSAwKXtcclxuICAgICAgICBpbmRleCA9IHNlbGYuYmFubmVyQ291bnQtMTtcclxuICAgIH1lbHNlIGlmKGluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50KzEpe1xyXG4gICAgICAgIGluZGV4ID0gMDtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleCAtIDE7XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVxKGluZGV4KS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoc2VsZi5pbmRleCA+PSBzZWxmLmJhbm5lckNvdW50KzEpe1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9LDIwMDApO1xyXG59O1xyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihzZWxmLmluZGV4ID09PSAwKXtcclxuICAgICAgICAgICAgLy8gPT3vvJoxID09ICcxJ++8mnRydWVcclxuICAgICAgICAgICAgLy8gPT09PSAxICE9ICcxJ1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyQ291bnQqc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgtLTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzZWxmLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKXtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvdmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy5iYW5uZXJHcm91cC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g56ys5LiA5Liq5Ye95pWw5piv77yM5oqK6byg5qCH56e75Yqo5YiwYmFubmVy5LiK5Lya5omn6KGM55qE5Ye95pWwXHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KHRydWUpO1xyXG4gICAgfSxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g56ys5LqM5Liq5Ye95pWw5piv77yM5oqK6byg5qCH5LuOYmFubmVy5LiK56e76LWw5Lya5omn6KGM55qE5Ye95pWwXHJcbiAgICAgICAgc2VsZi5sb29wKCk7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsb2JqKSB7XHJcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4KzE7XHJcbiAgICAgICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcclxuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gSW5kZXgoKXtcclxuICAgIHRoaXMucGFnZSA9IDI7XHJcbiAgICB0aGlzLmNhdGVnb3J5X2lkID0gMDtcclxufVxyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGxvYWRCdG4gPSAkKCcjbG9hZF9tb3JlX2J0bicpO1xyXG4gICAgbG9hZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncCc6IHNlbGYucGFnZSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IHNlbGYuY2F0ZWdvcnlfaWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzZXMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgnbmV3c19pdGVtJywgeyduZXdzZXMnOiBuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJCgnLmlubmVyX25ld3NfYm94Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdG4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPXRoaXM7XHJcbiAgICB2YXIgdGFiQm94ID0gJCgnLnRhYl9ib3gnKTtcclxuICAgIHRhYkJveC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoJ2RhdGEtY2F0ZWdvcnknKTtcclxuICAgICAgICAvLyDojrflj5bnrKzkuIDpobXnmoTmlbDmja5cclxuICAgICAgICB2YXIgcGFnZSA9IDE7XHJcbiAgICAgICAgdmFyIGxvYWRCdG4gPSAkKCcjbG9hZF9tb3JlX2J0bicpO1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogY2F0ZWdvcnlfaWQsXHJcbiAgICAgICAgICAgICAgICAncCc6IHBhZ2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgnbmV3c19pdGVtJywgeyduZXdzZXMnOiBuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKCcuaW5uZXJfbmV3c19ib3gnKTtcclxuICAgICAgICAgICAgICAgICAgICB1bC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkQnRuLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xyXG4gICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcbiAgICBpbmRleC5ydW4oKTtcclxufSk7Il19
